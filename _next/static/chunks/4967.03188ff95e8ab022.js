"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4967],{3868:function(l,e){e.Z={src:"/_next/static/media/Cancelable.16c54cb4.svg",height:30,width:30,blurWidth:0,blurHeight:0}},4692:function(l,e){e.Z={src:"/_next/static/media/NonVegIcon.9d4d8b7e.svg",height:30,width:30,blurWidth:0,blurHeight:0}},3793:function(l,e){e.Z={src:"/_next/static/media/NotCancelable.f4c983f2.svg",height:30,width:30,blurWidth:0,blurHeight:0}},5005:function(l,e){e.Z={src:"/_next/static/media/NotReturnable.08bebe48.svg",height:30,width:30,blurWidth:0,blurHeight:0}},4558:function(l,e){e.Z={src:"/_next/static/media/Returnable.0f4e2d59.svg",height:30,width:30,blurWidth:0,blurHeight:0}},5177:function(l,e){e.Z={src:"/_next/static/media/VegIcon.38b8cdd3.svg",height:30,width:30,blurWidth:0,blurHeight:0}},4967:function(l,e,i){var t=i(5893),d=i(7294),s=i(5346),o=i(1664),a=i.n(o),r=i(3312),n=i(788),c=i(254),u=i(4452),v=i(5007),m=i(2537),x=i(7296),p=i(5678),_=i(6606),h=i(3753),f=i(6141),g=i(1626),j=i(5383),b=i(4318);e.Z=l=>{var e,i,o,N,y,w,k,q,C,S,P,A,Z,B,V,O,I,z;let{product:F,largeImage:E=!1}=l;(0,j.t)();let W=(0,v.I0)(),D=(0,v.v9)(l=>l.Cart),H=(0,v.v9)(l=>l.Setting.setting),T=(0,v.v9)(l=>l.User),G=(0,v.v9)(l=>l.Favorite.favouriteProductIds),[M,J]=(0,d.useState)([]),[R,Q]=(0,d.useState)(!1),[K,U]=(0,d.useState)(!1),[X,Y]=(0,d.useState)(!1);(0,d.useEffect)(()=>{var l,e;let i=null==F?void 0:null===(l=F.variants)||void 0===l?void 0:l.find(l=>(null==l?void 0:l.is_unlimited_stock)===0&&(null==l?void 0:l.stock)>0);void 0==i?J(null==F?void 0:null===(e=F.variants)||void 0===e?void 0:e[0]):J(i)},[]);let L=l=>Object.entries(null==l?void 0:l.reduce((l,e)=>{let i=l[e.product_id]||0;return{...l,[e.product_id]:i+e.qty}},{})).map(l=>{let[e,i]=l;return{product_id:parseInt(e),qty:i}}),$=async(l,e,i)=>{try{var t,d,s,o;let a=await x.Xq({product_id:l,product_variant_id:e,qty:i});if(1===a.status){if((null==D?void 0:null===(s=D.cartProducts)||void 0===s?void 0:null===(d=s.find(i=>(null==i?void 0:i.product_id)==l&&(null==i?void 0:i.product_variant_id)==e))||void 0===d?void 0:d.qty)==void 0){W((0,m.RV)({data:a}));let t=[...null==D?void 0:D.cartProducts,{product_id:l,product_variant_id:e,qty:i}];W((0,m.Sq)({data:t})),W((0,m.OW)({data:null==a?void 0:a.sub_total}))}else{let t=null==D?void 0:null===(o=D.cartProducts)||void 0===o?void 0:o.map(t=>t.product_id==l&&(null==t?void 0:t.product_variant_id)==e?{...t,qty:i}:t);W((0,m.RV)({data:a})),W((0,m.Sq)({data:t})),W((0,m.OW)({data:null==a?void 0:a.sub_total}))}}else(null==a?void 0:null===(t=a.data)||void 0===t?void 0:t.one_seller_error_code)==1?Y(!0):p.Am.error(a.message)}catch(l){console.log("error",l)}},ll=async(l,e)=>{try{let t=await x.h2({product_id:l,product_variant_id:e});if((null==t?void 0:t.status)===1){var i;let d=null==D?void 0:null===(i=D.cartProducts)||void 0===i?void 0:i.filter(i=>(null==i?void 0:i.product_id)!=l&&(null==i?void 0:i.product_variant_id)!=e);W((0,m.OW)({data:null==t?void 0:t.sub_total})),W((0,m.Sq)({data:d}))}else p.Am.error(t.message)}catch(l){console.log("error",l)}},le=(l,e,i,t,d,s)=>{let o=(null==M?void 0:M.discounted_price)!==0?null==M?void 0:M.discounted_price:null==M?void 0:M.price;if(d){var a,r;let l;0!==t?("add"==s?W((0,m.Nj)({data:o})):"remove"==s&&W((0,m.kO)({data:o})),l=null==D?void 0:null===(a=D.guestCart)||void 0===a?void 0:a.map(l=>(null==l?void 0:l.product_id)==e&&(null==l?void 0:l.product_variant_id)==i?{...l,qty:t}:l)):("add"==s?W((0,m.Nj)({data:o})):"remove"==s&&W((0,m.kO)({data:o})),l=null==D?void 0:null===(r=D.guestCart)||void 0===r?void 0:r.filter(l=>(null==l?void 0:l.product_id)!=e&&(null==l?void 0:l.product_variant_id)!=i)),W((0,m.Ss)({data:l}))}else"add"==s?W((0,m.Nj)({data:o})):"remove"==s&&W((0,m.kO)({data:o})),W((0,m.Ss)({data:[...null==D?void 0:D.guestCart,{product_id:e,product_variant_id:i,qty:t,productPrice:o}]}))},li=(l,e,i)=>{var t;let d=null==l?void 0:null===(t=l.find(l=>(null==l?void 0:l.product_id)==(null==e?void 0:e.id)))||void 0===t?void 0:t.qty;Number(0!==e.is_unlimited_stock)?d>=Number(null==e?void 0:e.total_allowed_quantity)?p.Am.error((0,r.t)("max_cart_limit_error")):le(e,null==e?void 0:e.id,null==M?void 0:M.id,i,1,"add"):d>=Number(null==M?void 0:M.stock)?p.Am.error((0,r.t)("out_of_stock_message")):d>=Number(null==e?void 0:e.total_allowed_quantity)?p.Am.error((0,r.t)("max_cart_limit_error")):le(e,null==e?void 0:e.id,null==M?void 0:M.id,i,1,"add")},lt=(l,e)=>{var i;let t=null==l?void 0:null===(i=l.find(l=>(null==l?void 0:l.product_id)==(null==e?void 0:e.id)))||void 0===i?void 0:i.qty;(null==M?void 0:M.is_unlimited_stock)==0&&(null==M?void 0:M.stock)==0?p.Am.error((0,r.t)("out_of_stock_message")):Number(t||0)<Number(e.total_allowed_quantity)?le(e,e.id,null==M?void 0:M.id,1,0,"add"):p.Am.error((0,r.t)("out_of_stock_message"))},ld=(l,e)=>{var i;((null==l?void 0:null===(i=l.find(l=>(null==l?void 0:l.product_id)==(null==e?void 0:e.id)))||void 0===i?void 0:i.qty)||0)>=Number(null==e?void 0:e.total_allowed_quantity)?p.Am.error((0,r.t)("out_of_stock_message")):(null==M?void 0:M.is_unlimited_stock)==0&&(null==M?void 0:M.stock)<=0?p.Am.error((0,r.t)("out_of_stock_message")):Number(e.is_unlimited_stock)?$(e.id,M.id,1):(null==M?void 0:M.status)?$(e.id,null==M?void 0:M.id,1):p.Am.error((0,r.t)("out_of_stock_message"))},ls=(l,e)=>{var i,t,d,s,o;let a=null==l?void 0:null===(i=l.find(l=>(null==l?void 0:l.product_id)==(null==e?void 0:e.id)))||void 0===i?void 0:i.qty;Number(e.is_unlimited_stock)?a<Number(null==e?void 0:e.total_allowed_quantity)?$(e.id,null==M?void 0:M.id,(null==D?void 0:null===(d=D.cartProducts)||void 0===d?void 0:null===(t=d.find(l=>(null==l?void 0:l.product_variant_id)==(null==M?void 0:M.id)))||void 0===t?void 0:t.qty)+1):p.Am.error((0,r.t)("max_cart_limit_error")):a>=Number(M.stock)?p.Am.error((0,r.t)("out_of_stock_message")):Number(a)>=Number(e.total_allowed_quantity)?p.Am.error((0,r.t)("max_cart_limit_error")):$(e.id,null==M?void 0:M.id,(null==D?void 0:null===(o=D.cartProducts)||void 0===o?void 0:null===(s=o.find(l=>(null==l?void 0:l.product_variant_id)==(null==M?void 0:M.id)))||void 0===s?void 0:s.qty)+1)},lo=(l,e)=>{l.preventDefault(),l.stopPropagation(),e.variants.length>1&&Q(!0)},la=async l=>{l.preventDefault(),l.stopPropagation();let e=null==G?void 0:G.includes(null==F?void 0:F.id);try{if(null==T?void 0:T.jwtToken){if(e){let l=await x.QJ({product_id:null==F?void 0:F.id});if(1==l.status){let e=null==G?void 0:G.filter(l=>l!=(null==F?void 0:F.id));W((0,h.r2)({data:e})),p.Am.success(l.message)}else p.Am.error(l.message)}else{let l=await x.Jh({product_id:null==F?void 0:F.id});if(1==l.status){let e=[...G,null==F?void 0:F.id];W((0,h.r2)({data:e})),p.Am.success(l.message)}else p.Am.error(l.message)}}else p.Am.error((0,r.t)("required_login_message_for_wishlist"))}catch(l){console.log("Error",l)}},lr=F.variants,ln=(null==D?void 0:D.isGuest)===!1&&(null==D?void 0:null===(i=D.cartProducts)||void 0===i?void 0:null===(e=i.find(l=>(null==l?void 0:l.product_variant_id)==(null==M?void 0:M.id)))||void 0===e?void 0:e.qty)>0||(null==D?void 0:D.isGuest)===!0&&(null==D?void 0:null===(N=D.guestCart)||void 0===N?void 0:null===(o=N.find(l=>(null==l?void 0:l.product_variant_id)===(null==M?void 0:M.id)))||void 0===o?void 0:o.qty)>0,lc=!1===D.isGuest?null==D?void 0:null===(w=D.cartProducts)||void 0===w?void 0:null===(y=w.find(l=>(null==l?void 0:l.product_variant_id)==(null==M?void 0:M.id)))||void 0===y?void 0:y.qty:null==D?void 0:null===(q=D.guestCart)||void 0===q?void 0:null===(k=q.find(l=>(null==l?void 0:l.product_variant_id)==(null==M?void 0:M.id)))||void 0===k?void 0:k.qty,lu=(null==F?void 0:null===(C=F.variants)||void 0===C?void 0:C.length)<=1&&(null==F?void 0:null===(P=F.variants)||void 0===P?void 0:null===(S=P[0])||void 0===S?void 0:S.is_unlimited_stock)==0&&(null==F?void 0:null===(Z=F.variants)||void 0===Z?void 0:null===(A=Z[0])||void 0===A?void 0:A.stock)==0||(null==M?void 0:M.stock)<=0&&(null==M?void 0:M.is_unlimited_stock)==0||(null==F?void 0:null===(B=F.variants)||void 0===B?void 0:B.length)<=1&&(null==F?void 0:null===(O=F.variants)||void 0===O?void 0:null===(V=O[0])||void 0===V?void 0:V.status)==0;return(0,t.jsxs)("div",{children:[(0,t.jsxs)(a(),{href:"/product/".concat(null==F?void 0:F.slug),className:"flex flex-col p-2 cardBorder group  headerBackgroundColor textColor cardBorder hover:shadow-lg [.image-card_&]:rounded-none [.cardBorder_&]:rounded-none rounded-md",children:[(0,t.jsx)("div",{className:"flex relative textColor",children:(0,t.jsxs)("div",{className:"relative aspect-square w-full h-48 [.verticle-card_&]:h-44 [.image-card_&]:h-64 [.verticle-card_&]:md:h-72",children:[(0,t.jsx)(f.Z,{className:"rounded-lg object-cover h-full w-full",alt:F.name,src:F.image_url}),(null==M?void 0:M.discounted_price)!==0&&(null==M?void 0:M.discounted_price)!==(null==M?void 0:M.price)?(0,t.jsxs)("span",{className:"bg-[#db3d26] rounded-[4px] text-white text-[14px] font-medium left-0 leading-[16px] px-2 py-1 absolute text-center uppercase top-0",children:[(I=null==M?void 0:M.discounted_price,((z=null==M?void 0:M.price)-I)/z*100).toFixed(2),"% ",(0,r.t)("off")]}):null,(0,t.jsxs)("ul",{className:"absolute right-3 top-5 flex flex-col gap-2 translate-x-3 group-hover:translate-x-0 opacity-0 group-hover:opacity-100 transition-all duration-500 ease-in-out",children:[(0,t.jsx)("li",{className:"buttonBorder hover:primaryBorder hover:primaryColor rounded-full h-[30px] w-[30px] flex justify-center items-center bodyBackgroundColor",onClick:la,children:(0,t.jsx)("span",{children:G&&(null==G?void 0:G.includes(null==F?void 0:F.id))?(0,t.jsx)(_.SEb,{size:20,className:"primaryFilledColor"}):(0,t.jsx)(_.kTx,{size:20})})}),(0,t.jsx)("li",{className:"buttonBorder hover:primaryBorder hover:primaryColor rounded-full h-[30px] w-[30px] flex justify-center items-center bodyBackgroundColor",children:(0,t.jsx)("div",{onClick:l=>{l.preventDefault(),l.stopPropagation(),U(!0)},children:(0,t.jsx)(b.quy,{size:20})})})]})]})}),(0,t.jsxs)("div",{className:"h-[100px] flex flex-col justify-between ",children:[(0,t.jsx)("h3",{className:"flex textColor text-[16px] font-bold leading-[1.2] mt-3 max-h-[2.4em] overflow-hidden text-ellipsis capitalize w-full group-hover:primaryColor py-[2px]",children:null==F?void 0:F.name}),(null==F?void 0:F.average_rating)>0?(0,t.jsx)("div",{className:"rating",children:(0,t.jsx)("div",{className:"flex",children:(0,t.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(l=>(0,t.jsx)(s.QJe,{size:15,className:"".concat(l<=parseInt(null==F?void 0:F.average_rating)?"fill-yellow-400 text-yellow-400":"fill-gray-200 text-gray-200")},l))})})}):null,(0,t.jsx)("div",{className:"flex",children:(null==M?void 0:M.discounted_price)!==0&&(null==M?void 0:M.discounted_price)!==(null==M?void 0:M.price)?(0,t.jsxs)(t.Fragment,{children:["  ",(0,t.jsxs)("p",{className:"textColortext-base font-bold",children:[null==H?void 0:H.currency,null==M?void 0:M.discounted_price]}),(0,t.jsxs)("p",{className:"textColor text-[14px] font-normal leading-[17px] m-1 line-through",children:[null==H?void 0:H.currency,null==M?void 0:M.price]})]}):(0,t.jsxs)("p",{className:"textColor text-base font-bold",children:[null==H?void 0:H.currency,null==M?void 0:M.price]})})]}),lu?(0,t.jsx)("div",{className:"flex items-center h-[80px] md:h-[44px]  text-[#db3d26] font-extrabold ",children:(0,r.t)("OutOfStock")}):(0,t.jsxs)("div",{className:"flex gap-0 md:gap-3 h-[80px] md:h-[44px] w-full flex-col md:flex-row",children:[(0,t.jsxs)("button",{onClick:l=>lo(l,F),className:"md:w-1/2 w-full flex items-center my-[5px] justify-between  rounded-[4px] px-2 py-1.5 md:py-2  buttonBackground text-sm md:text-nowrap",children:["".concat(null==M?void 0:M.measurement," ").concat(null==M?void 0:M.stock_unit_name),(null==lr?void 0:lr.length)>1?(0,t.jsx)("div",{children:(0,t.jsx)(n.gwH,{size:16})}):(0,t.jsx)(t.Fragment,{})]}),ln?(0,t.jsxs)("div",{className:"md:w-1/2 w-full cardBorder flex justify-between rounded-sm my-1",children:[(0,t.jsx)("button",{className:" md:px-0.5 flex items-center justify-center primaryBackColor  text-white font-bold text-sm w-8  h-[34px] rounded-[2px]",onClick:l=>{var e,i,t,d,s;l.preventDefault(),l.stopPropagation(),(null==D?void 0:D.isGuest)?le(F,null==F?void 0:F.id,null==M?void 0:M.id,(null==D?void 0:null===(i=D.guestCart)||void 0===i?void 0:null===(e=i.find(l=>(null==l?void 0:l.product_variant_id)==(null==M?void 0:M.id)))||void 0===e?void 0:e.qty)-1,1,"remove"):(null==D?void 0:null===(t=D.cartProducts)||void 0===t?void 0:t.find(l=>(null==l?void 0:l.product_variant_id)==(null==M?void 0:M.id)).qty)==1?ll(null==F?void 0:F.id,null==M?void 0:M.id):$(F.id,M.id,(null==D?void 0:null===(s=D.cartProducts)||void 0===s?void 0:null===(d=s.find(l=>(null==l?void 0:l.product_variant_id)==(null==M?void 0:M.id)))||void 0===d?void 0:d.qty)-1)},children:(0,t.jsx)(s.iFH,{})}),(0,t.jsx)("input",{value:lc,disabled:!0,className:"w-1/2  text-center",min:"1",max:null==M?void 0:M.stock}),(0,t.jsx)("button",{className:" flex items-center justify-center font-bold text-sm  md:p-1 primaryBackColor text-white w-8  rounded-[2px] h-[34px] ",onClick:l=>{if(l.preventDefault(),l.stopPropagation(),null==D?void 0:D.isGuest){var e,i;li(L(null==D?void 0:D.guestCart),F,(null==D?void 0:null===(i=D.guestCart)||void 0===i?void 0:null===(e=i.find(l=>(null==l?void 0:l.product_id)==(null==F?void 0:F.id)&&(null==l?void 0:l.product_variant_id)==(null==M?void 0:M.id)))||void 0===e?void 0:e.qty)+1)}else ls(L(null==D?void 0:D.cartProducts),F)},children:(0,t.jsx)(s.wEH,{})})]}):(0,t.jsxs)("button",{className:"w-full md:w-1/2 flex gap-1 text-base  my-[5px] p-1 md:p-0 items-center  justify-center rounded-[4px]  hover:primaryBackColor transition-all duration-300 hover:text-white addToCartColor primaryColor ",onClick:l=>{l.preventDefault(),l.stopPropagation(),(null==D?void 0:D.isGuest)?lt(L(null==D?void 0:D.cartProducts),F):ld(L(null==D?void 0:D.cartProducts),F)},children:[(0,t.jsx)(s.b3Y,{size:20}),(0,t.jsx)("span",{children:(0,r.t)("add")})]})]})]}),(0,t.jsx)(u.Z,{product:F,showDetailModal:K,setShowDetailModal:U}),(0,t.jsx)(c.Z,{product:F,showVariants:R,setShowVariants:Q}),(0,t.jsx)(g.Z,{showSingleSellerModal:X,setSingleSellerModal:Y,product:F,selectedVariant:M})]})}},4452:function(l,e,i){var t=i(5893),d=i(7294),s=i(7296),o=i(9970),a=i(5346),r=i(5675),n=i.n(r),c=i(2261);i(4172),i(7638);var u=i(6832),v=i(5007),m=i(3312),x=i(2515),p=i(5177),_=i(4692),h=i(3793),f=i(3868),g=i(4558),j=i(5005),b=i(8258),N=i(303),y=i(2537),w=i(5678),k=i(6606),q=i(3753),C=i(1159),S=i(6141),P=i(1626),A=i(5383);e.Z=l=>{var e,i,r,Z,B,V;let{product:O,showDetailModal:I,setShowDetailModal:z}=l,F=(0,A.t)(),E=(0,v.I0)(),W=(0,v.v9)(l=>l.Setting),D=(0,v.v9)(l=>l.City.city),H=(0,v.v9)(l=>l.Cart),T=(0,v.v9)(l=>l.User),G=(0,v.v9)(l=>l.Favorite.favouriteProductIds),M=null==W?void 0:null===(e=W.setting)||void 0===e?void 0:e.currency,[J,R]=(0,d.useState)([]),[Q,K]=(0,d.useState)(null==O?void 0:null===(i=O.variants)||void 0===i?void 0:i[0]),[U,X]=(0,d.useState)({}),[Y,L]=(0,d.useState)(1),[$,ll]=(0,d.useState)([]),[le,li]=(0,d.useState)(""),[lt,ld]=(0,d.useState)(!1),[ls,lo]=(0,d.useState)(!1),[la,lr]=(0,d.useState)(!1);(0,d.useEffect)(()=>{I&&(ln(),lv())},[I,O.id,O.slug]),(0,d.useEffect)(()=>{lc()},[Q]);let ln=async()=>{ld(!0);try{var l,e,i;let t=await s.gk({latitude:D.latitude,longitude:D.longitude,id:O.id,slug:O.slug});ld(!1),ll([null==t?void 0:null===(l=t.data)||void 0===l?void 0:l.image_url,...null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.images]),li(null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.image_url),R(t.data)}catch(l){ld(!0),console.log("error",l)}},lc=()=>{(null==O?void 0:O.is_unlimited_stock)==0&&(null==Q?void 0:Q.stock)<=0?lr(!1):lr(!0)},lu=l=>{K(l)},lv=async()=>{try{let l=await s.Mz({id:null==O?void 0:O.id,limit:10,offset:0});X(null==l?void 0:l.data)}catch(l){console.log("error",l)}},lm=async()=>{var l,e,i;let t=(null==H?void 0:H.isGuest)?lx(null==H?void 0:H.guestCart):lx(null==H?void 0:H.cartProducts),d=H.guestCart.find(l=>(null==l?void 0:l.product_id)==(null==O?void 0:O.id)&&(null==l?void 0:l.product_variant_id)==(null==Q?void 0:Q.id)),o=null==t?void 0:null===(l=t.find(l=>(null==l?void 0:l.product_id)==(null==O?void 0:O.id)))||void 0===l?void 0:l.qty,a=H.cartProducts.find(l=>(null==l?void 0:l.product_id)==(null==O?void 0:O.id)&&(null==Q?void 0:Q.id)==(null==l?void 0:l.product_variant_id));if(0==Number(null==O?void 0:O.is_unlimited_stock)&&(null==Q?void 0:Q.stock)<=0){w.Am.error((0,m.t)("out_of_stock_message"));return}if(null==H?void 0:H.isGuest){if(o+Y>(null==O?void 0:O.total_allowed_quantity))w.Am.error((0,m.t)("max_cart_limit_error"));else if(d){let l=null===(e=H.guestCart)||void 0===e?void 0:e.map(l=>(null==l?void 0:l.product_id)==(null==O?void 0:O.id)&&(null==l?void 0:l.product_variant_id)==(null==Q?void 0:Q.id)?{...l,qty:l.qty+Y}:l);E((0,y.Ss)({data:l})),lp(l),L(1),w.Am.success((0,m.t)("product_added_successfully"))}else{let l=0!==Q.discounted_price?Q.discounted_price:Q.price,e={product_id:O.id,product_variant_id:null==Q?void 0:Q.id,qty:Y,productPrice:l};E((0,y.Ss)({data:[...null==H?void 0:H.guestCart,e]})),lp([...H.guestCart,e]),L(1),w.Am.success((0,m.t)("product_added_successfully"))}}else try{if(o+Y>(null==O?void 0:O.total_allowed_quantity))w.Am.error((0,m.t)("max_cart_limit_error"));else{let l=await s.Xq({product_id:O.id,product_variant_id:Q.id,qty:a?a.qty+Y:Y});if(1==l.status){if(a){let l=H.cartProducts.map(l=>l.product_id==O.id&&l.product_variant_id==Q.id?{...l,qty:a?a.qty+Y:Y}:l);E((0,y.Sq)({data:l}))}else{let l=[...H.cartProducts,{product_id:O.id,product_variant_id:null==Q?void 0:Q.id,qty:Y}];E((0,y.Sq)({data:l}))}E((0,y.RV)({data:l})),E((0,y.OW)({data:l.sub_total})),w.Am.success((0,m.t)("product_added_successfully"))}else(null==l?void 0:null===(i=l.data)||void 0===i?void 0:i.one_seller_error_code)==1?lo(!0):w.Am.error(l.message)}}catch(l){console.log("Error",l)}},lx=l=>Object.entries(null==l?void 0:l.reduce((l,e)=>{let i=l[e.product_id]||0;return{...l,[e.product_id]:i+e.qty}},{})).map(l=>{let[e,i]=l;return{product_id:parseInt(e),qty:i}}),lp=l=>{let e=l.reduce((l,e)=>l+=e.productPrice*e.qty,0);E((0,y.dE)({data:e}))},l_=async l=>{l.preventDefault(),l.stopPropagation();let e=null==G?void 0:G.includes(null==O?void 0:O.id);try{if(null==T?void 0:T.jwtToken){if(e){let l=await s.QJ({product_id:null==O?void 0:O.id});if(1==l.status){let e=null==G?void 0:G.filter(l=>l!=(null==O?void 0:O.id));E((0,q.r2)({data:e})),w.Am.success(l.message)}else w.Am.error(l.message)}else{let l=await s.Jh({product_id:null==O?void 0:O.id});if(1==l.status){let e=[...G,null==O?void 0:O.id];E((0,q.r2)({data:e})),w.Am.success(l.message)}else w.Am.error(l.message)}}else w.Am.error((0,m.t)("required_login_message_for_wishlist"))}catch(l){console.log("Error",l)}},lh=l=>{li(l)};return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(o.Vq,{open:I,children:[(0,t.jsxs)(o.cZ,{className:"max-w-xl lg:max-w-screen-lg overflow-y-scroll max-h-screen",children:[(0,t.jsxs)(o.fK,{className:"font-bold text-2xl text-start flex flex-row justify-end",children:[" ",(0,t.jsx)("div",{children:(0,t.jsx)(N.FMH,{size:32,onClick:()=>{z(!1)}})})]}),(0,t.jsx)("div",{className:" ",children:lt?(0,t.jsx)(C.Z,{}):(0,t.jsxs)("div",{className:"flex flex-col p-1 md:p-6 justify-center md:justify-start mx-auto",children:[(0,t.jsxs)("div",{className:"pb-6 border-b-2",children:[(0,t.jsx)("h2",{className:"font-bold text-2xl break-all",children:null==J?void 0:J.name}),(0,t.jsxs)("div",{className:"flex items-center gap-1 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex gap-4",children:[(null==U?void 0:U.average_rating)>0?(0,t.jsx)("div",{className:"border-r-2 px-2",children:(0,t.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,t.jsx)("div",{className:"flex",children:[1,2,3,4,5].map((l,e)=>(0,t.jsx)(a.QJe,{size:15,className:"".concat(l<=(null==U?void 0:U.average_rating)?"fill-yellow-400 text-yellow-400":"fill-gray-200 text-gray-200")},l))}),"(".concat(null==U?void 0:null===(r=U.rating_list)||void 0===r?void 0:r.length,")")]})}):null,(null==J?void 0:J.seller_name)!==null&&(0,t.jsx)("div",{className:"px-2 py-1 ",children:(0,t.jsx)("div",{className:"flex text-xs",children:(0,t.jsxs)("span",{children:[(0,m.t)("seller"),":",(0,t.jsx)("span",{className:"font-bold",children:null==J?void 0:J.seller_name})]})})})]}),(null==J?void 0:J.fssai_lic_no)!==""&&(0,t.jsx)("div",{className:"text-gray-200 border-l-2 border-gray-200 h-6 hidden md:block"}),(null==J?void 0:J.fssai_lic_no)!==""&&(0,t.jsxs)("div",{className:"flex items-center gap-3 ",children:[(0,t.jsx)("div",{className:"text-xs",children:(null==J?void 0:J.fssai_lic_img)&&(0,t.jsx)(n(),{width:0,height:0,src:null==J?void 0:J.fssai_lic_img,className:"w-9 h-9 object-contain",alt:"fssaiImage"})}),(0,t.jsxs)("div",{className:"text-xs",children:[(0,m.t)("fssai_license_no")," ",null==J?void 0:J.fssai_lic_no]})]})]})]}),(0,t.jsxs)("div",{className:"grid  grid-cols-1 md:grid-cols-12   mt-6 gap-3  justify-center",children:[(0,t.jsxs)("div",{className:"md:col-span-5 col-span-12",children:[(0,t.jsxs)("div",{className:"relative aspect-square h-auto w-full",children:[(0,t.jsx)(S.Z,{src:le,alt:J.name,className:"h-full w-full aspect-square rounded-sm"}),(null==Q?void 0:Q.discounted_price)!==0&&(null==Q?void 0:Q.discounted_price)!==(null==Q?void 0:Q.price)?(0,t.jsxs)("span",{className:"bg-[#db3d26] rounded-[4px] text-white text-[14px] font-bold left-1 leading-[16px] px-2 py-1 absolute text-center uppercase top-1",children:[(B=null==Q?void 0:Q.discounted_price,((V=null==Q?void 0:Q.price)-B)/V*100).toFixed(2),"% ",(0,m.t)("off")]}):null]}),(0,t.jsx)("div",{className:"mt-[10px]",children:(0,t.jsx)(c.tq,{spaceBetween:10,modules:[u.W_],className:"brand-swiper",breakpoints:{1200:{slidesPerView:3.5},1024:{slidesPerView:3},768:{slidesPerView:3},375:{slidesPerView:3},0:{slidesPerView:2.5}},children:null==$?void 0:$.map((l,e)=>(0,t.jsx)(c.o5,{children:(0,t.jsx)("div",{className:"h-auto relative w-full aspect-square",children:(0,t.jsx)(S.Z,{src:l,alt:J.name,className:"h-full w-full aspect-square rounded-sm",handleOnClick:()=>lh(l)})},e)},J.id))},F)})]}),(0,t.jsxs)("div",{className:" col-span-12 md:col-span-7 flex flex-col gap-6",children:[(0,t.jsx)("div",{className:"flex items-center gap-1",children:(null==Q?void 0:Q.discounted_price)!==0&&(null==Q?void 0:Q.discounted_price)!==(null==Q?void 0:Q.price)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("h2",{className:"font-bold text-3xl ",children:[M,null==Q?void 0:Q.discounted_price]}),(0,t.jsxs)("h3",{className:"line-through font-bold text-base text-gray-500",children:[M,null==Q?void 0:Q.price]})]}):(0,t.jsxs)(t.Fragment,{children:[" ",(0,t.jsxs)("h2",{className:"font-bold text-3xl ",children:[M,null==Q?void 0:Q.price]})]})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("p",{className:"font-normal text-base",children:(0,m.t)("chooseVariant")}),(0,t.jsx)("div",{className:" flex-col grid grid-cols-12",children:null==J?void 0:null===(Z=J.variants)||void 0===Z?void 0:Z.map(l=>{let e=null==l?void 0:l.discounted_price,i=null==l?void 0:l.price;return(0,t.jsxs)("div",{className:"flex flex-col col-span-6 md:col-span-4 lg:col-span-3 mr-2 my-1 text-center rounded-sm   justify-center items-center cursor-pointer ".concat(Q.id==l.id?"primaryBorder addToCartColor":"cardBorder"),onClick:()=>lu(l),children:[(0,t.jsx)("p",{className:"font-bold text-sm",children:"".concat(null==l?void 0:l.measurement," ").concat(null==l?void 0:l.stock_unit_name)}),(0,t.jsxs)("span",{className:"flex gap-1 text-[13px] line-clamp-1",children:[(0,t.jsxs)("p",{children:[M,0!=e&&e!==i?e:i]}),0!=e&&e!==i?(0,t.jsxs)("p",{className:"line-through",children:[M,i]}):(0,t.jsx)(t.Fragment,{})]})]},l.id)})})]}),(0,t.jsxs)("div",{className:"flex gap-4 flex-col lg:flex-row",children:[la?(0,t.jsxs)("div",{className:"flex gap-6 md:gap-4 items-center",children:[(0,t.jsxs)("div",{className:"flex border-2 rounded-sm p-1 lg:py-[8px] items-center w-[120px]",children:[(0,t.jsx)("button",{className:" font-bold text-xl",onClick:()=>{Y<=1||L(Y-1)},children:(0,t.jsx)(x.ego,{})}),(0,t.jsx)("input",{type:"text",disabled:!0,value:Y,className:" text-center font-medium text-base bg-transparent w-[70px]"}),(0,t.jsx)("button",{className:" font-bold text-xl",onClick:()=>{0==Number(null==O?void 0:O.is_unlimited_stock)&&Y>=(null==Q?void 0:Q.stock)?w.Am.error((0,m.t)("out_of_stock")):Y>=(null==O?void 0:O.total_allowed_quantity)?w.Am.error((0,m.t)("max_cart_limit_error")):L(Y+1)},children:(0,t.jsx)(x.OvN,{})})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("button",{className:"primaryBackColor flex gap-2 text-white py-[6px] px-5 md:px-5 lg:py-3 rounded-sm text-base font-semibold text-nowrap",onClick:lm,children:[(0,t.jsx)(a.b3Y,{size:22}),(0,m.t)("add_to_cart")]})})]}):(0,t.jsx)("div",{className:"flex items-center h-[80px] md:h-[38px]  text-[#db3d26] font-extrabold ",children:(0,m.t)("OutOfStock")}),(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)("span",{className:"rounded-full border-2 p-2",onClick:l_,children:G&&(null==G?void 0:G.includes(null==O?void 0:O.id))?(0,t.jsx)(k.SEb,{size:20}):(0,t.jsx)(k.kTx,{size:20})}),(0,t.jsxs)("span",{className:"text-nowrap",children:[" ",G&&(null==G?void 0:G.includes(null==O?void 0:O.id))?(0,m.t)("removeTowishlist"):(0,m.t)("addToWishlist")]})]})]}),(0,t.jsxs)("div",{className:"buttonBackground rounded-sm p-4 flex flex-col gap-4",children:[(null==J?void 0:J.indicator)?(null==J?void 0:J.indicator)==1?(0,t.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,t.jsx)("div",{className:"h-[32px] w-[32px] relative object-cover",children:(0,t.jsx)(n(),{src:p.Z,fill:!0,alt:null==J?void 0:J.name,className:"h-full w-full "})}),(0,t.jsxs)("p",{children:[" ",(0,m.t)("vegetarian")]})]}):(0,t.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,t.jsx)("div",{className:"h-[32px] w-[32px] relative object-cover",children:(0,t.jsx)(n(),{src:_.Z,fill:!0,alt:null==J?void 0:J.name,className:"h-full w-full "})}),(0,t.jsxs)("p",{children:[" ",(0,m.t)("non-vegetarian")]})]}):null,(null==J?void 0:J.cancelable_status)==1?(0,t.jsxs)("div",{className:"flex items-center  gap-2",children:[(0,t.jsx)("div",{className:"h-[32px] w-[32px] relative object-cover",children:(0,t.jsx)(n(),{fill:!0,src:f.Z,alt:"cancelableIcon",className:"h-full w-full"})}),(0,t.jsxs)("span",{className:"cancelDetail",children:[(0,m.t)("cancelable"),(null==J?void 0:J.till_status)==1?(0,t.jsx)("p",{className:"font-semibold text-base",children:(0,m.t)("payment_pending")}):null,(null==J?void 0:J.till_status)==2?(0,t.jsx)("p",{className:"font-semibold text-base",children:(0,m.t)("received")}):null,(null==J?void 0:J.till_status)==3?(0,t.jsx)("p",{className:"font-semibold text-base",children:(0,m.t)("processed")}):null,(null==J?void 0:J.till_status)==4?(0,t.jsx)("p",{className:"font-semibold text-base",children:(0,m.t)("shipped")}):null,(null==J?void 0:J.till_status)==5?(0,t.jsx)("p",{className:"font-semibold text-base",children:(0,m.t)("out_for_delivery")}):null]})]}):(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-[32px] w-[32px] relative object-cover",children:(0,t.jsx)(n(),{src:h.Z,alt:"cancelableIcon",className:"h-full w-full",fill:!0})}),(0,t.jsx)("span",{className:"font-semibold text-base",children:(0,m.t)("non-cancelable")})]}),(null==J?void 0:J.return_status)==1?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-[32px] w-[32px] relative object-cover",children:(0,t.jsx)(n(),{fill:!0,src:g.Z,alt:"returnableIcon",className:"h-full w-full"})}),(0,t.jsxs)("span",{className:"font-semibold text-base",children:[(0,m.t)("returnable")," ",null==J?void 0:J.return_days," ",(0,m.t)("days")]})]}):(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-[32px] w-[32px] relative object-cover",children:(0,t.jsx)(n(),{fill:!0,src:j.Z,alt:"nonReturnableIcon",className:"h-full w-full"})}),(0,t.jsx)("span",{className:"font-semibold text-base",children:(0,m.t)("non-returnable")})]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center my-2 md:my-0 ",children:[(0,t.jsxs)("span",{className:"text-sm font-normal",children:[(0,m.t)("shareProduct"),":"]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(b.N0,{url:"".concat("https://loopee.lk/","/product/").concat(null==O?void 0:O.slug),children:(0,t.jsx)(b.ud,{className:"h-8 w-8 rounded-full"})}),(0,t.jsx)(b.B,{url:"".concat("https://loopee.lk/","/product/").concat(null==O?void 0:O.slug),children:(0,t.jsx)(b.Zm,{className:"h-8 w-8 rounded-full"})}),(0,t.jsx)(b.Dk,{url:"".concat("https://loopee.lk/","/product/").concat(null==O?void 0:O.slug),children:(0,t.jsx)(b.Vq,{className:"h-8 w-8 rounded-full"})}),(0,t.jsx)(a.gjK,{className:"h-8 w-8 rounded-full bg-gray-400 p-2  hover:cursor-pointer",onClick:()=>{navigator.clipboard.writeText("".concat("https://loopee.lk/","/product/").concat(null==O?void 0:O.slug)),w.Am.success((0,m.t)("link_copied_to_clipboard"))}})]})]})]})]})]})})]}),(0,t.jsx)(P.Z,{showSingleSellerModal:ls,setSingleSellerModal:lo,product:O,selectedVariant:Q})]})})}}}]);