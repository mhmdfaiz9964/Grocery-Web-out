"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5101],{6114:function(l,d,i){var e=i(5893),o=i(7294),a=i(1163),n=i(5346),r=i(1664),s=i.n(r),u=i(5383);let c=["/order-detail"];d.Z=()=>{var l,d,i,r;let v=(0,u.t)(),p=(0,a.useRouter)(),[m,_]=(0,o.useState)([]);(0,o.useEffect)(()=>{if(p.pathname){let l=p.asPath.split("?")[0].split("/").filter(l=>l);_(l.map((d,i)=>{let e="/".concat(l.slice(0,i+1).join("/"));return{label:decodeURIComponent(d),href:e}}))}},[p.pathname,p.asPath]);let x=l=>"/product"===l?p.push("/products"):"/categories"===l?p.push("/categories/all"):c.includes(l)?p.back():p.push(l);return(0,e.jsx)("section",{className:"p-3 md:p-6 breadCrumbBg",children:(0,e.jsx)("div",{className:" container px-2",children:(0,e.jsxs)("div",{className:"flex justify-between flex-col gap-1 md:flex-row",children:[(0,e.jsx)("p",{className:"text-xl font-bold capitalize",children:m.length?(null==m?void 0:m.length)===2&&parseInt(null===(l=m[m.length-1])||void 0===l?void 0:l.label)?null==m?void 0:null===(i=m[0])||void 0===i?void 0:i.label:(null==m?void 0:m.length)===1?null==m?void 0:null===(r=m[0])||void 0===r?void 0:r.label:null===(d=m[1])||void 0===d?void 0:d.label:"Home"}),(0,e.jsxs)("div",{className:"flex gap-1 items-center overflow-hidden ",children:[(0,e.jsx)(s(),{href:"/",className:"text-sm font-bold capitalize",children:"Home"}),m.map((l,d)=>(0,e.jsxs)("div",{className:"flex items-center gap-1 max-w-[150px]",children:[v?(0,e.jsx)(n.bUI,{size:14}):(0,e.jsx)(n.Dli,{size:14}),d===m.length-1?(0,e.jsx)("span",{className:"text-sm font-bold capitalize cursor-pointer text-ellipsis overflow-hidden whitespace-nowrap",style:{maxWidth:"100%"},title:l.label,children:l.label}):(0,e.jsx)("div",{onClick:()=>x(l.href),className:"text-sm font-bold capitalize text-ellipsis overflow-hidden whitespace-nowrap cursor-pointer",style:{maxWidth:"100%"},title:l.label,children:l.label})]},l.href))]})]})})})}},5101:function(l,d,i){i.r(d),i.d(d,{default:function(){return S}});var e=i(5893),o=i(7294),a=i(5709),n=i(6114),r=i(5007),s=i(7296),u=i(2537),c=i(5678),v=i(3870),p=i(5346),m=i(6141),_=l=>{var d,i,a,n;let{product:_,cartProductsData:x,setCartProductsData:h}=l,f=(0,r.I0)(),j=(0,r.v9)(l=>l.Setting.setting),b=(0,r.v9)(l=>l.Cart),y=(0,r.v9)(l=>l.Cart.promo_code),[N,g]=(0,o.useState)();(0,o.useEffect)(()=>{g(((null==_?void 0:_.discounted_price)==0?null==_?void 0:_.price:null==_?void 0:_.discounted_price)*(null==_?void 0:_.qty))},[]);let w=async()=>{try{let d=await s.h2({product_id:null==_?void 0:_.product_id,product_variant_id:null==_?void 0:_.product_variant_id});if((null==d?void 0:d.status)==1){var l;let i=null==b?void 0:null===(l=b.cartProducts)||void 0===l?void 0:l.filter(l=>(null==l?void 0:l.product_variant_id)!==(null==_?void 0:_.product_variant_id)),e=null==x?void 0:x.filter(l=>(null==l?void 0:l.product_variant_id)!==(null==_?void 0:_.product_variant_id));h(e),f((0,u.Sq)({data:i})),f((0,u.OW)({data:null==d?void 0:d.sub_total}))}else c.Am.error(d.message)}catch(l){console.log("error",l)}},C=l=>{let d=null==l?void 0:l.reduce((l,d)=>l+=(null==d?void 0:d.productPrice)*d.qty,0);f((0,u.OW)({data:d})),f((0,u.dE)({data:d}))},q=()=>{var l;let d=null==b?void 0:null===(l=b.guestCart)||void 0===l?void 0:l.filter(l=>(null==l?void 0:l.product_variant_id)!==(null==_?void 0:_.product_variant_id));h(null==x?void 0:x.filter(l=>(null==l?void 0:l.product_variant_id)!==(null==_?void 0:_.product_variant_id))),f((0,u.Ss)({data:d})),C(d)},k=async()=>{b.isGuest?q():await w()},S=l=>Object.entries(null==l?void 0:l.reduce((l,d)=>{let i=l[d.product_id]||0;return{...l,[d.product_id]:i+d.qty}},{})).map(l=>{let[d,i]=l;return{product_id:parseInt(d),qty:i}}),E=async()=>{try{var l,d,i,e,o;let a=(null==b?void 0:b.isGuest)?S(null==b?void 0:b.guestCart):S(null==b?void 0:b.cartProducts),n=null==a?void 0:null===(l=a.find(l=>(null==l?void 0:l.product_id)==(null==_?void 0:_.product_id)))||void 0===l?void 0:l.qty,r=b.cartProducts.find(l=>(null==l?void 0:l.product_id)==(null==_?void 0:_.product_id)&&(null==l?void 0:l.product_variant_id)==(null==_?void 0:_.product_variant_id));if((null==_?void 0:_.is_unlimited_stock)!==0){if(n>=Number(null==_?void 0:_.total_allowed_quantity))c.Am.error(t("max_cart_limit_error"));else if(b.isGuest){let l=null==b?void 0:null===(d=b.guestCart)||void 0===d?void 0:d.map(l=>(null==l?void 0:l.product_id)==(null==_?void 0:_.product_id)&&(null==l?void 0:l.product_variant_id)==(null==_?void 0:_.product_variant_id)?{...l,qty:Number((null==l?void 0:l.qty)+1)}:l);C(l),f((0,u.Ss)({data:l}))}else try{let l=await s.Xq({product_id:null==_?void 0:_.product_id,product_variant_id:null==_?void 0:_.product_variant_id,qty:Number(r.qty+1)});if(1==l.status){let d=null==b?void 0:null===(i=b.cartProducts)||void 0===i?void 0:i.map(l=>(null==l?void 0:l.product_id)==(null==_?void 0:_.product_id)&&(null==l?void 0:l.product_variant_id)==(null==_?void 0:_.product_variant_id)?{...l,qty:(null==r?void 0:r.qty)+1}:l);f((0,u.OW)({data:l.sub_total})),f((0,u.Sq)({data:d})),await P(l.sub_total)}}catch(l){console.log("Error",l)}}else if(n>=Number(null==_?void 0:_.stock))c.Am.error(t("out_of_stock_message"));else if(n>=Number(null==_?void 0:_.total_allowed_quantity))c.Am.error(t("max_cart_limit_error"));else if(b.isGuest){let l=null==b?void 0:null===(e=b.guestCart)||void 0===e?void 0:e.map(l=>(null==l?void 0:l.product_id)==(null==_?void 0:_.product_id)&&(null==l?void 0:l.product_variant_id)==(null==_?void 0:_.product_variant_id)?{...l,qty:Number((null==l?void 0:l.qty)+1)}:l);C(l),f((0,u.Ss)({data:l}))}else try{let l=await s.Xq({product_id:null==_?void 0:_.product_id,product_variant_id:null==_?void 0:_.product_variant_id,qty:Number(r.qty+1)});if(1==l.status){let d=null==b?void 0:null===(o=b.cartProducts)||void 0===o?void 0:o.map(l=>(null==l?void 0:l.product_id)==(null==_?void 0:_.product_id)&&(null==l?void 0:l.product_variant_id)==(null==_?void 0:_.product_variant_id)?{...l,qty:(null==r?void 0:r.qty)+1}:l);f((0,u.OW)({data:l.sub_total})),f((0,u.Sq)({data:d})),await P(l.sub_total)}}catch(l){console.log("Error",l)}}catch(l){console.log("Error",l)}},P=async l=>{try{let d=await s.Zj({promoCodeName:null==y?void 0:y.promo_code,amount:l});1==d.status?f((0,u.dt)({data:d.data})):await F()}catch(l){console.log("Error",l)}},B=async()=>{try{var l,d,i,e,o;let a;null==(a=(null==b?void 0:b.isGuest)?S(null==b?void 0:b.guestCart):S(null==b?void 0:b.cartProducts))||null===(l=a.find(l=>(null==l?void 0:l.product_id)==(null==_?void 0:_.product_id)))||void 0===l||l.qty;let n=null==b?void 0:null===(i=b.guestCart)||void 0===i?void 0:null===(d=i.find(l=>(null==l?void 0:l.product_id)==(null==_?void 0:_.product_id)&&(null==l?void 0:l.product_variant_id)==(null==_?void 0:_.product_variant_id)))||void 0===d?void 0:d.qty,r=b.cartProducts.find(l=>(null==l?void 0:l.product_id)==(null==_?void 0:_.product_id)&&(null==l?void 0:l.product_variant_id)==(null==_?void 0:_.product_variant_id));if(b.isGuest){if(n<=1)return;let l=null==b?void 0:null===(e=b.guestCart)||void 0===e?void 0:e.map(l=>(null==l?void 0:l.product_id)==(null==_?void 0:_.product_id)&&(null==l?void 0:l.product_variant_id)==(null==_?void 0:_.product_variant_id)?{...l,qty:Number((null==l?void 0:l.qty)-1)}:l);C(l),f((0,u.Ss)({data:l}))}else{if(r.qty<=1)return;try{let l=await s.Xq({product_id:null==_?void 0:_.product_id,product_variant_id:null==_?void 0:_.product_variant_id,qty:Number(r.qty-1)});if(1==l.status){let d=null==b?void 0:null===(o=b.cartProducts)||void 0===o?void 0:o.map(l=>(null==l?void 0:l.product_id)==(null==_?void 0:_.product_id)&&(null==l?void 0:l.product_variant_id)==(null==_?void 0:_.product_variant_id)?{...l,qty:(null==r?void 0:r.qty)-1}:l);f((0,u.OW)({data:l.sub_total})),f((0,u.Sq)({data:d})),await P(l.sub_total)}}catch(l){console.log("Error",l)}}}catch(l){console.log("error",l)}},F=async()=>{f((0,u.lF)())},W=!1===b.isGuest?null==b?void 0:null===(i=b.cartProducts)||void 0===i?void 0:null===(d=i.find(l=>(null==l?void 0:l.product_variant_id)==(null==_?void 0:_.product_variant_id)))||void 0===d?void 0:d.qty:null==b?void 0:null===(n=b.guestCart)||void 0===n?void 0:null===(a=n.find(l=>(null==l?void 0:l.product_variant_id)==(null==_?void 0:_.product_variant_id)))||void 0===a?void 0:a.qty;return(0,e.jsxs)("div",{className:"grid grid-cols-12 items-center gap-4 p-4 border-b min-w-[600px]",children:[(0,e.jsxs)("div",{className:"col-span-4 flex space-x-4",children:[(0,e.jsx)("div",{className:"w-16 h-16 rounded-sm",children:(0,e.jsx)(m.Z,{src:null==_?void 0:_.image_url,alt:null==_?void 0:_.name,className:"h-full w-full object-cover"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"text-base font-bold text-ellipsis overflow-hidden whitespace-nowrap max-w-[170px]",children:null==_?void 0:_.name}),(0,e.jsxs)("p",{className:"text-xs font-normal",children:[null==_?void 0:_.measurement," ",null==_?void 0:_.unit_code]})]})]}),(0,e.jsx)("div",{className:"col-span-2 text-center",children:(null==_?void 0:_.discounted_price)!==0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("h2",{className:"text-base font-bold",children:[null==j?void 0:j.currency,null==_?void 0:_.discounted_price]}),(0,e.jsxs)("p",{className:"text-sm font-normal line-through",children:[null==j?void 0:j.currency," ",null==_?void 0:_.price]})]}):(0,e.jsxs)("h2",{className:"text-base font-bold",children:[null==j?void 0:j.currency," ",null==_?void 0:_.price]})}),(0,e.jsxs)("div",{className:"col-span-3 flex items-center justify-center rounded cardBorder",children:[(0,e.jsx)("button",{className:"px-2 py-1",onClick:B,children:(0,e.jsx)(p.iFH,{})}),(0,e.jsx)("input",{className:"py-1 text-base w-2/3 text-center",value:W,disabled:!0}),(0,e.jsx)("button",{className:"px-2 py-1",onClick:E,children:(0,e.jsx)(p.wEH,{})})]}),(0,e.jsx)("div",{className:"col-span-2 text-center",children:(0,e.jsxs)("p",{className:"text-base font-bold",children:[null==j?void 0:j.currency,N]})}),(0,e.jsx)("div",{className:"col-span-1 text-center",children:(0,e.jsx)("button",{className:"text-red-600 hover:text-red-800",onClick:k,children:(0,e.jsx)(v.qy0,{size:26})})})]})},x=i(3312),h=i(788),f=i(1163),j=l=>{var d,i,o,a,n,s,v,p,m,_;let{setShowCouponCode:j}=l,b=(0,f.useRouter)(),y=(0,r.I0)(),N=(0,r.v9)(l=>l.Cart),g=(0,r.v9)(l=>l.User),w=(0,r.v9)(l=>{var d;return null===(d=l.Setting)||void 0===d?void 0:d.setting}),C=(null==N?void 0:null===(d=N.cartSubTotal)||void 0===d?void 0:d.toFixed(2))-(null==N?void 0:null===(o=N.promo_code)||void 0===o?void 0:null===(i=o.discount)||void 0===i?void 0:i.toFixed(2));return(0,e.jsxs)("div",{className:"max-w-sm p-4  border  rounded-md cardBorder",children:[(null==g?void 0:g.jwtToken)&&(0,e.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,e.jsx)("h3",{className:"text-sm font-medium ",children:(0,x.t)("have_coupon")}),(0,e.jsx)("button",{className:"px-3 py-1 text-sm font-medium border rounded hover:primaryBackColor hover:text-white",onClick:()=>j(!0),children:(0,x.t)("view_coupon")})]}),(null==N?void 0:N.promo_code)&&(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,e.jsx)("p",{className:"text-sm ",children:(0,x.t)("promoCodeSuccess")}),(0,e.jsx)("button",{onClick:()=>{y((0,u.lF)())},className:" text-xs font-medium text-red-500 hover:primaryBackColor hover:text-white p-2 rounded-sm",children:(0,x.t)("delete")})]}),(0,e.jsxs)("div",{className:"flex items-center justify-between p-2 mt-2 bg-[#55AE7B0A] primaryBorder  rounded-md",children:[(0,e.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,e.jsx)("span",{className:"primaryColor",children:(0,e.jsx)(h.jxC,{className:"primaryColor",size:20})}),(0,e.jsx)("p",{className:"text-base font-bold primaryColor",children:null==N?void 0:null===(a=N.promo_code)||void 0===a?void 0:a.promo_code})]}),(0,e.jsxs)("p",{className:"text-base font-bold primaryColor",children:[null==w?void 0:w.currency,null==N?void 0:null===(s=N.promo_code)||void 0===s?void 0:null===(n=s.discount)||void 0===n?void 0:n.toFixed(2)]})]})]}),(0,e.jsx)("hr",{className:"mb-4 border-gray-300"}),(0,e.jsxs)("div",{className:"mb-4  ",children:[(0,e.jsxs)("div",{className:"flex justify-between  mt-3 font-bold text-base",children:[(0,e.jsx)("p",{className:"",children:(0,x.t)("sub_total")}),(0,e.jsxs)("p",{children:[null==w?void 0:w.currency,null==N?void 0:null===(v=N.cartSubTotal)||void 0===v?void 0:v.toFixed(2)]})]}),(null==N?void 0:N.promo_code)&&(0,e.jsxs)("div",{className:"flex justify-between  mt-3 font-bold text-base",children:[(0,e.jsx)("p",{className:"",children:(0,x.t)("promoDiscount")}),(0,e.jsxs)("p",{className:"",children:[null==w?void 0:w.currency,null==N?void 0:null===(m=N.promo_code)||void 0===m?void 0:null===(p=m.discount)||void 0===p?void 0:p.toFixed(2)]})]})]}),(0,e.jsx)("hr",{className:"mb-4 border-gray-300"}),(0,e.jsxs)("div",{className:"flex flex-wrap justify-between gap-2 items-center mb-4 backgroundColor p-3 rounded",children:[(0,e.jsx)("p",{className:"text-lg font-bold ",children:(0,x.t)("total")}),(0,e.jsxs)("p",{className:"text-lg font-bold",children:[null==w?void 0:w.currency," ",(null==N?void 0:N.promo_code)?null==C?void 0:C.toFixed(2):null==N?void 0:null===(_=N.cartSubTotal)||void 0===_?void 0:_.toFixed(2)]})]}),(0,e.jsx)("button",{className:"w-full py-2 mb-2 text-sm font-medium text-white primaryBackColor rounded ",onClick:()=>{(null==g?void 0:g.jwtToken)?b.push("/checkout"):c.Am.error((0,x.t)("login_to_access_checkout_page"))},children:(0,x.t)("proceed_to_checkout")}),(0,e.jsx)("button",{className:"w-full py-2 rounded-sm text-sm font-medium  hover:primaryBackColor hover:text-white",onClick:()=>{b.push("/products")},children:(0,x.t)("continue_shopping")})]})},b=i(7081),y=i(1664),N=i.n(y),g=i(5675),w=i.n(g),C=i(8744),q=i(1159),k=()=>{let l=(0,r.I0)(),d=(0,r.v9)(l=>l.City.city),i=(0,r.v9)(l=>l.Cart);(0,r.v9)(l=>l.User);let[a,c]=(0,o.useState)([]),[v,p]=(0,o.useState)(!1),[m,h]=(0,o.useState)([]),[f,y]=(0,o.useState)(!1);(0,o.useEffect)(()=>{var l,d;(null==i?void 0:i.isGuest)==!0&&(null==i?void 0:null===(l=i.guestCart)||void 0===l?void 0:l.length)==0?c([]):!1==i.isGuest?k():(null==i?void 0:null===(d=i.guestCart)||void 0===d?void 0:d.length)>0&&(null==i?void 0:i.isGuest)==!0&&g()},[]);let g=async()=>{y(!0);try{var e,o,a;let n=null==i?void 0:null===(e=i.guestCart)||void 0===e?void 0:e.map(l=>l.product_variant_id),r=null==i?void 0:null===(o=i.guestCart)||void 0===o?void 0:o.map(l=>l.qty),v=await s.N0({latitude:null==d?void 0:d.latitude,longitude:null==d?void 0:d.longitude,variant_ids:null==n?void 0:n.join(","),quantities:null==r?void 0:r.join(",")});1==v.status&&(c(v.data.cart),l((0,u.OW)({data:null==v?void 0:null===(a=v.data)||void 0===a?void 0:a.sub_total}))),y(!1)}catch(l){y(!1),console.log("Error",l)}},k=async()=>{y(!0);try{let n=await s.dv({latitude:null==d?void 0:d.latitude,longitude:null==d?void 0:d.longitude});if((null==n?void 0:n.status)==1){var i,e,o,a;c(null==n?void 0:null===(i=n.data)||void 0===i?void 0:i.cart),l((0,u.OW)({data:null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.sub_total})),h(null==n?void 0:n.data),y(!1);let d=null==n?void 0:null===(a=n.data)||void 0===a?void 0:null===(o=a.cart)||void 0===o?void 0:o.map(l=>({product_id:null==l?void 0:l.product_id,product_variant_id:null==l?void 0:l.product_variant_id,qty:null==l?void 0:l.qty}));l((0,u.Sq)({data:d}))}else l((0,u.Sq)({data:[]})),l((0,u.OW)({data:0})),c([]),(0,u.OW)(0),y(!1)}catch(l){y(!1),console.log("error",l)}};return f?(0,e.jsx)(q.Z,{height:800}):(0,e.jsxs)("section",{children:[(0,e.jsx)(n.Z,{}),(0,e.jsx)("div",{div:!0,className:"container",children:(null==a?void 0:a.length)>0?(0,e.jsxs)("div",{className:"my-12 px-2",children:[(0,e.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,e.jsx)("h1",{className:"font-bold text-2xl",children:(0,x.t)("myCart")}),(0,e.jsx)("p",{className:"font-medium text-base",children:"".concat((0,x.t)("there_are")," ").concat(null==a?void 0:a.length,"  ").concat((0,x.t)("product_in_your_cart"))})]}),(0,e.jsxs)("div",{className:"grid grid-cols-12  gap-4 mt-6 ",children:[(0,e.jsx)("div",{className:"col-span-12 md:col-span-8 cardBorder rounded-sm w-full overflow-hidden",children:(0,e.jsxs)("div",{className:"w-full overflow-x-auto",children:[(0,e.jsxs)("div",{className:"grid grid-cols-12 gap-4 min-w-[600px] p-4 font-medium border-b border-gray-300",children:[(0,e.jsx)("div",{className:"col-span-4 font-bold",children:(0,x.t)("product")}),(0,e.jsx)("div",{className:"col-span-2 text-center font-bold",children:(0,x.t)("price")}),(0,e.jsx)("div",{className:"col-span-3 text-center font-bold",children:(0,x.t)("quantity")}),(0,e.jsx)("div",{className:"col-span-2 text-center font-bold",children:(0,x.t)("total")}),(0,e.jsx)("div",{className:"col-span-1 text-center font-bold",children:(0,x.t)("action")})]}),null==a?void 0:a.map(l=>{var d,o,n,r;if((null==i?void 0:null===(o=i.cartProducts)||void 0===o?void 0:null===(d=o.find(d=>(null==d?void 0:d.product_variant_id)==(null==l?void 0:l.product_variant_id)))||void 0===d?void 0:d.qty)>0||(null==i?void 0:null===(r=i.guestCart)||void 0===r?void 0:null===(n=r.find(d=>(null==d?void 0:d.product_variant_id)==(null==l?void 0:l.product_variant_id)))||void 0===n?void 0:n.qty)>0)return(0,e.jsx)(_,{product:l,cartProductsData:a,setCartProductsData:c},null==l?void 0:l.id)})]})}),(0,e.jsx)("div",{className:"col-span-12 md:col-span-4",children:(0,e.jsx)(j,{setShowCouponCode:p})})]})]}):(0,e.jsx)("div",{className:"flex items-center justify-center h-full my-auto mx-10",children:(0,e.jsxs)("div",{className:"flex items-center justify-center flex-col gap-2 my-4",children:[(0,e.jsx)(w(),{src:C.Z,alt:"No Cart Data",height:0,width:0,className:"h-full w-full"}),(0,e.jsx)("h1",{className:"font-bold text-[22px] text-center py-2",children:(0,x.t)("empty_cart_list_message")}),(0,e.jsx)("p",{className:"font-bold text-xs text-center",children:(0,x.t)("empty_cart_list_description")}),(0,e.jsx)(N(),{href:"/products",className:"primaryBackColor text-white font-bold p-1 rounded-sm",children:(0,x.t)("empty_cart_list_button_name")})]})})}),(0,e.jsx)(b.Z,{showCouponCode:v,setShowCouponCode:p})]})},S=()=>{let l=(0,r.v9)(l=>l.Language.selectedLanguage);return(0,o.useEffect)(()=>{},[l]),(0,e.jsx)(a.Z,{children:(0,e.jsx)(k,{})})}}}]);